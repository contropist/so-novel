/* 中国拉清单工作领导小组组长 你是反贼吗 法习斯 习王的田野上 黄俄 晚共昏君 共哀宗 “黄袍加身” 习核心 那翠化 习二二（二零二零年五月二十二日开二会） 通商宽衣 发皇帝梦 刁斤山 习瘟猪 主席+终身制 这个年很静 人均接近八千万 倒车帝 习时代 修宪连任 习语 阳台上的哨兵 包惠帝 哲欣 老街 最后领导人 习歪嘴 习式病毒 electron8964 习远凸 包子病毒 红二代 习##卡##巴##卡 維尼頌 野蛮其体魄 倒车 禁评的理由 Voice##of##Pooh 习病法 官僚主义 彩色熊 清单帝 总统包子习 野心习 隔离”的金葫芦 习“甩锅” 武当七侠的政治斗争 傻大头 独裁者 云视察 青年大学包 野兽先辈 羽日帝 “皇帝梦” 腊肉馅儿包子 民进党 刁近猴 毛装 喜包皮 习大犬 大海掀翻小池塘 维尼史 习包皮 习二胖 vop 学包积极分子 学包率 匪酋习维尼 甩锅侠 讨习檄文 九评 基拉大和习近平 当代秦始皇 V尼哥 一带一路 卡近菲 包包侠 习三点 维尼挂彩 习一尊 朝令夕改 “梦回大清” 花花公子 坡涛汹涌 格萨尔 超邓赶毛 世宗 吸包皮 习太孑 北京中南海支部书记 大兔 中国首席造梦大师 小学博士 毛泽东2.0 主席贺词 习尔布特 习蛤 追思焦裕禄 口罩大会 人民领袖 席子兵法 万岁来武汉 维持会长 普习金 中国离岸隐匿资产管理工作领导小组组组长 习包子 bingbang帝 通商宽衣 邪大大 蹄防 爱新觉罗近平 头上三尺有神明 萨格尔王 戏博士 习习蛤蛤 习大郎 初二圣君 赵家家仆 专治各种不服 习正日 亲自指挥 亲自指挥疫情 狙击手待命 习包子 习猪下台 ChinaXi 大国造疫 纳翠党 Criminal##Xi##"Xitler"##Jinping 习梦死 口罩外交 亲自封号 狙击手待命 形式主义防疫 习奥塞斯库 习公奭 儿童习典 SB包子 习大帝 劝进 XDD 中国特色射秽煮疫制度 做N届的主席 视频看望 瘟疫降生习近平 瘟疫领主习近平 当代秦二世 清华毕业 大撒币 错误执行者 刁槑夶尛 习达姆 “登基” 習大佬 孢 书单吟诵者 灰习牛 电脑世代586 悉包皮 习king 送礼平 20000T麦子 猪禁评 扛麦帝 习思想 WHO的君王 习皇的新装 东方project 宰相 阿平 习二卒 习总输记 川普的朋友or敌人 假.."~bang！卒 席近平 “无罩”现身 支那精神野爹 习和谐 我是一个足球迷 习犬犬 宽衣帝 腊肉包 维尼连任 64岁 The##Xi##Factor（习近平因素） 乳包文化 贬词包用 共哀宗 非洲大撒币 万岁来武汉了 不强自息 墨索里习 祈翠語言包 退党 百万雄师事件 骑巨龙 任志强 习尽贫 新影帝 扛麦郎 刁后主 总书记来我家 崇祯帝 任大炮 影子末帝 战疫国 墙内人 习emperor 习禁评 习二世胡亥 孤独的毒王 习总 维尼大帝 习语录 没有网络安全就没有国家安全 末代皇帝 宽衣大帝 狙击手布阵 仲夏夜之中国梦 法外狂徒Lucy（德国） 不敢高声语 习澳塞斯库 东瘟疫之地统治者暨全境守护者 不同意的举手##没有##没有 抗麦套装 洗尽贫 总加速师 习包子的Fa 中国离岸隐匿资产管理工作领导小组组组长 梦回大清 习家军 截颈平 夶 习近平光辉形象 公车上书 毛近平 习匪帝 nmslman（习主席） 读书单 习兵法 信女愿一生吃素 国王 慨撒大帝 细瓶颈 世界最强乞丐 动森 宽衣撸绣单肩扛麦光腚拉碾歪脖撒币小学博士帝 冤大头 十里山路不换肩 习曱甴 倒车斯基 读稿机 野兽主席 智商不重要 裹嘎举吸钢闸门 冲塔 玉习大帝 习得梁家书卷 皇帝梦 二百斤 第22条军规 包子露宪 赵人13 该违禁词汇由 GitCode 官方生成，仅用于测试，请勿传播！ 庆丰包·勃列日涅夫 习猪席 shit##hole##bing##fa 大大招牌 A##Big##Deal 中国爱非洲 核平全世界 习废帝 家业论 嬉包皮 西朝鲜人民自治岛 十日文革 战“疫”金句 巴拿马文件 刁二将 习大乞 鞋哥 迈克尔·索伊 屎禁评 shuu##kinn##pei 满脸喷粪 梁家河 祈翠 平话 彭主席（习主席走了太太接班） 昆明湖涨潮 习卒 帝皇頌 崇祯 毛孙 习低能儿 禁评封号 习Core 习夶 粪坑兵法 头号球迷 习奥塞斯库、齐奥塞斯库 沼气专家 亲自考察 袁世凯第二 氼兲嫑炛 习索里尼 赵弹 赵王 二次袁、袁世凯二世、袁二 庆丰废物 200吨 刁二婚 细颈瓶 阿道夫-习 号尿壶公 白猪 习近砰 重地之战 糖尿维尼 疫情蔓延 指定接班人 疯狂宇宙 梁家河贵族 称帝修宪 闹得欢 习付 恩重如删 人民领袖 添宪宝宝 习博士 支那毒王 吸精瓶 北红尾鸲 耀眼黄红黄 Mr##Shithole 习后主 皇帝亲临忠诚的武汉 集近闭 平&强 乳透社##小反旗 小学居士 戴口赵 二百五大帝 毛二世 习大林 红旗下的蛋 2020全面小康 習敗北 国贼习近平 喷粪帝 厕所革命 文明其精神 习卒习 不知名氏 清零宗、清零帝 習敗敗 号屎洞 维尼写史 皇帝的新衣 赛禁评 包子金刚腿 习孢子 维尼快乐组织（Winnie##Happy##Organization）简称WHO 包禁评 习特勒 岿然不动 virus##king 总书记来过我的家 枪毙名单 颐使气指 尊蛤讨包 食腐虫 维尼熊 十一郎习近平 万岁 没规划的葬礼 终身领导人 习呆呆 系包皮 386系统驱动游戏 习殡法 习狍 习躲躲 韦来书记 修宪帝 习言乱语 胡志平 人尽皆知的体育迷 䒒(tiáo)菦(qín)苹(píng) 10号跳跳虎被维尼拉清单 习匪 禁评大帝 包大人 两会期间+隐瞒 亲自删评 “登机”（与登基同音） 动物森友会 毛魔转世 小习微信 习像章 九大诉求 冰棒外交 親自視頻 习梦思 习三拍 役民五术 秦城监狱 习屎黄 日子像蜜甜 当皇帝的小丑 足球外交 维尼带货 袭包皮 五毛主席 洗包皮 习是春竹 嘻包皮 领袖习澡水 集金币 央视姓党 人类命运共同体首席架构师 坟头蹦迪 相信有神论的物理学博士 近日成 坡涛汹涌 背书单 爱新觉罗·近平 刁人13 维尼·屎(Winnie##the##Poo) 近身平A 梦帝 连专家也为之叹服的电脑天才 修宪 黑白翠 720事件 近言 学包分子 大锅瞻遗 习流氓 蔡英文最强助选 维尼DISCO 维尼梗有害 拉清单 刁人13 刁大犬 毛进平 习贼 习尿瓶 御板泽民 戏包皮 每日祈翠 吃赵弹 孙笑川 颐指气使 习张三丰 包子兵法 尼哥 包帝巡游 习条英机 时间控制 老歪脖子树 赵付 习教父 习二蛋 习下台 屎進瓶 外交习语 粪坑先生 人民战争 冠子兵法 恐惊天上人 塔西佗陷阱 半羽习近平 维稳警察（O） shit禁评 动物之森 刁近乎 独裁国贼 字共狗 习梦撕 彩色哥 动物庄园 屎侯 包包大人 裸宽包子劾心 叩谢习恩 Corona##Xi（习病毒） 习壳郎 习奥赛斯库 富平学霸刁斤干 翡翠娘娘 习皇帝 皇帝亲临忠诚的武汉 大撒幣 独彩者 维尼之声 惜包皮 感恩教育 疯狂宇宙包 親自蒞臨 习二坐船 乳制品 CoronaXi 包子宪法 包皇 毛二习 习武帝 金科律玉 撒币宝 习厉王 XD 习宽衣 甴种 捐麦子 nmslese##dream 太祖兔 庆丰称帝 叼斤干 Heil##Xitler 习是春绿 《生物安全法》 次级乳包 现任匪首 习猪头 xdd 习进棺 “复辟” 断崖式下跌 Chairman##Xi Cicada##3301##XD 平平 叩谢习恩 灭共助推器 亲自脱贫 习驴 习侯 游泳一千米 普近 武统时代 习大 集金pay 武汉委托李克强 习包子 恩维尔·霍习 毛二 天安门合法继承人 NMSL 4中组长 第一书记王沪宁 糟糕皇帝 刁远山 刁斤二 疯狂宇宙大帝 习老八 习背书 中国的新皇帝 庆丰帝的千秋梦 Adolf##Xitler 一天游泳一千米 甴近平 无限连任 “习泽东”和“洪宪”（袁世凯的帝号） 神明论 维尼警察（X） shit侯 包经 中字头组长 维尼熊给跳跳虎黄牌 大大品牌 */
package com.pcdd.sonovel.source;

import cn.hutool.core.lang.ConsoleTable;
import cn.hutool.core.util.StrUtil;
import cn.hutool.log.dialect.console.ConsoleLog;
import cn.hutool.log.level.Level;
import com.pcdd.sonovel.action.AggregatedSearchAction;
import com.pcdd.sonovel.model.SearchResult;
import com.pcdd.sonovel.parse.SearchParser;
import lombok.SneakyThrows;
import org.junit.jupiter.api.Test;

import java.util.List;

/**
 * 测试聚合搜索
 *
 * @author pcdd
 * Created at 2025/3/23
 */
class AggregatedSearchTest {

    static {
        ConsoleLog.setLevel(Level.OFF);
    }

    @SneakyThrows
    @Test
    void test01() {
        String kw = "玄鉴仙族";
        List<SearchResult> results = AggregatedSearchAction.getSearchResults(kw);
        SearchParser.printAggregateSearchResult(results);
        testTextSimilarity(results, kw);
    }

    void testTextSimilarity(List<SearchResult> result, String kw) {
        ConsoleTable table = ConsoleTable.create();
        table.addHeader("书名", "相似度");
        result.forEach(o -> {
            double similar = StrUtil.similar(kw, o.getBookName());
            table.addBody(o.getBookName(), String.valueOf(similar));
        });
        System.out.println(table);
    }

}